define(["jquery","jquery-ui","app/app-hrd-appraisal","app/app-hrd-recruitment","app/app-hrd-report","chained","metisMenu","Morris","datatables","bootstrap","datatables-bootstrap","timepicker","datepair","datetimepicker","highcharts","libs/bootstrap3-typeahead","select2","multiselect"],function(a,b,c,d,e){return{baseUrl:a("#root_base_url").val(),serverBaseUrl:a("#server_base_url").val(),storeID:a("#store_id_config").val(),overlayUI:a("#cover"),Appraisal:c,recruitment:d,hrdReport:e,enhancerCount:null!=document.getElementById("count_enhancer")?a("#count_enhancer").val():0,standardSchedRepeatStat:null!=document.getElementById("repeat-status")?a("#repeat-status").val():0,subtrahendCount:null!=document.getElementById("count_subtrahend")?a("#count_subtrahend").val():0,dataEnhancerSalaryComponent:null!=document.getElementById("data_enhancer_salary_component")?JSON.parse(a("#data_enhancer_salary_component").val()):0,dataSubstrahendSalaryComponent:null!=document.getElementById("data_substrahend_salary_component")?JSON.parse(a("#data_substrahend_salary_component").val()):0,init:function(){App.overlayUI.hide(),App.initFunc(App),App.initEvent(),App.Appraisal.init(),App.recruitment.init(),App.hrdReport.init(),a(App.overlayUI).on("click",function(){App.overlayUI.hide()}),a(".modal").on("click",function(){App.overlayUI.hide()})},initEvent:function(){console.log("EVENT"),a(".multiselect").multiselect({keepRenderingSort:!0}),a("select.select2").select2(),a("#side-menu").metisMenu(),a("#period-generate-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"MM-YYYY"}),App.fingerprint(),App.validationInput(),App.employeeAffairEvent(),App.memoRandumEvent(),App.salaryComponentEvent(),App.officeHourseEvent(),App.jobsEvent(),App.setSalaryComponentEVent(),App.employeeEvent(),App.jobsHistoryEvent(),App.payrollHistoryEvent(),App.scheduleStaffList(),App.holidaysHistory(),App.scheduleStandardEvent(),App.setComplimentUserEvent(),App.reimburseEvent(),App.attendanceEvent(),App.shiftEvent(),App.moveshiftEvent(),App.performanceEvent(),App.loanEvent(),App.overtimeEvent(),App.kelolajadwal(),App.employeesHoliday(),App.templateAuditEvent(),App.processAuditEvent(),App.settingEvent(),App.syncToMachine(),App.initListScheduleEmployee(),App.rollingShift(),App.setHolidays(),App.exchangeShift(),App.settingRollingOfficeHour(),a("#start_time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"H:mm"}),a("#end_time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"H:mm"}),a("#start_date").datetimepicker({sideBySide:!0,useCurrent:!1,format:"YYYY-MM-DD"}),a("#end_date").datetimepicker({sideBySide:!0,useCurrent:!1,format:"YYYY-MM-DD"}),a("#start_date").on("dp.change",function(b){a("#end_date").data("DateTimePicker").minDate(b.date)}),a("#end_date").on("dp.change",function(b){a("#start_date").data("DateTimePicker").minDate(b.date)}),a("#start_date1").datetimepicker({sideBySide:!0,useCurrent:!1,format:"YYYY-MM-DD"}),a("#end_date1").datetimepicker({sideBySide:!0,useCurrent:!1,format:"YYYY-MM-DD"}),a("#start_date1").on("dp.change",function(b){a("#end_date1").data("DateTimePicker").minDate(b.date)}),a("#end_date1").on("dp.change",function(b){a("#start_date1").data("DateTimePicker").minDate(b.date)})},initListScheduleEmployee:function(){var a={valueNames:["name"],searchClass:"search"};new List("employees",a)},settingEvent:function(){a("#cron_job_time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"HH:mm",widgetPositioning:{vertical:"bottom"}}),a("#dataTables-hrd-sync").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlSync").val(),iDisplayLength:10,columns:[{data:"controller"},{data:"start_time"},{data:"end_time"},{data:"interval"},{data:"actions"}],columnDefs:[{targets:2,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]})},downloadLogData:function(b){App.overlayUI.show();var c=a.ajax({type:"POST",url:App.baseUrl+"index.php/hrd_scheduler/"+b});c.done(function(a){App.alert("Download Data Fingerprint Berhasil!",function(){App.overlayUI.hide()})}),c.fail(function(a,b){App.alert("Gagal Mendownload Data Fingerprint!",function(){App.overlayUI.hide()})}),c.always(function(){})},syncToMachine:function(){a("#upload-to-machine").on("click",function(){App.overlayUI.show();var b=App.baseUrl+"admincms/hrd_staff/upload_staff_to_machine",c=a.ajax({type:"POST",url:b});c.done(function(a){App.alert("Data Sudah Tersinkronisasi",function(){App.overlayUI.hide()})}),c.fail(function(a,b){App.alert("Maaf, Status History Gagal Di Hapus. Silahkan Hubungi Administrator")}),c.always(function(){})}),a("#download-from-machine").on("click",function(){App.overlayUI.show();var b=App.baseUrl+"admincms/hrd_staff/download_finger_template",c=a.ajax({type:"POST",url:b});c.done(function(a){App.alert("Download Data Fingerprint berhasil",function(){App.overlayUI.hide()})}),c.fail(function(a,b){App.alert("Maaf, Status History Gagal Di Hapus. Silahkan Hubungi Administrator")}),c.always(function(){})})},employeeAffairEvent:function(){var b=a("#dataTables-employee-affair").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"name"},{data:"during"}],order:[[0,"asc"]]});b.on("draw.dt",function(){a(".delete-employee-affair").on("click",function(){var c=a(this).attr("employee-affair-id");App.confirm("Anda yakin ingin menghapus Status Kepegawaian? ",function(c){var d={emp_affair_id:c},e="delete_employee_affair",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){var c=JSON.parse(a);c.status?b.api().ajax.reload():App.alert(c.message)}),f.fail(function(a,b){App.alert("Maaf, Status Kepegawaian Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)}),a(".edit-employee-affair").on("click",function(){var b=a(this).attr("employee-affair-id");a("#save-employee-affair").attr("data-action","edit");var c=a.ajax({type:"POST",url:"get_one_employee_affair",data:{emp_affair_id:b}});c.done(function(b){var c=JSON.parse(b);c.status&&(a("#employee-affair-name").val(c.data.name),a("#during").val(c.data.during),a("#next_job").html(App.addOptionElement(c.next_job,c.data.next_job)),a("#employee-affair-id").val(c.data.id),a(".modal-title").html("Ubah Status Kepegawaian"),a("#save-employee-affair").attr("data-action","edit"),a("#employee-affair-modal").modal("show"))}),c.fail(function(a,b){App.alert("Maaf, Gagal Mengambil data status Kepegawaian. Silahkan Hubungi Administrator")}),c.always(function(){})})}),a("#save-employee-affair").on("click",function(){var c,d={emp_affair_name:a("#employee-affair-name").val(),during:a("#during").val(),next_job:a("#next_job").val()},e="save_employee_affair",f="",g="";if("edit"==a(this).attr("data-action")&&(d={emp_affair_name:a("#employee-affair-name").val(),emp_affair_id:a("#employee-affair-id").val(),next_job:a("#next_job").val(),during:a("#during").val()},e="update_employee_affair"),c=a("#employee-affair-name"),f=a("#during"),0===c.val().length)c.parent().addClass("has-error"),g+="Nama Status Kepegawaian Harus Diisi <br>";else if(0===f.val().length)f.parent().addClass("has-error"),g+="Lama Kerja Harus Diisi <br>";else{var h=a.ajax({type:"POST",url:e,data:d});h.done(function(c){console.log(c);var d=JSON.parse(c);d.status?(a("#employee-affair-name").val(""),a("#employee-affair-name").parent().removeClass("has-error"),a("#during").val(""),a("#during").parent().removeClass("has-error"),g="",a(".error-message").html(g),b.api().ajax.reload(),a("#employee-affair-modal").modal("hide")):App.alert(d.message)}),h.fail(function(a,b){App.alert("Maaf, Status Kepegawaian Gagal Di simpan. Silahkan Hubungi Administrator")}),h.always(function(){})}a(".error-message").html(g)}),a("#employee-affair-modal").on("hidden.bs.modal",function(b){a("#employee-affair-name").val(""),a("#employee-affair-id").val(""),a("#employee-affair-name").parent().removeClass("has-error"),a("#save-employee-affair").attr("data-action",""),a(".modal-title").html("Tambah Status Kepegawaian"),a(".error-message").html(" "),a("#next_job").html("")}),a("#employee-affair-modal").on("shown.bs.modal",function(b){var c=a("#employee-affair-id").val();if(0==c.length){var d=a.ajax({type:"POST",url:"get_all_employee_affair"});d.done(function(b){var c=JSON.parse(b);c.status&&a("#next_job").html(App.addOptionElement(c.next_job,!1))}),d.fail(function(a,b){App.alert("Maaf, Gagal Mengambil data status Kepegawaian. Silahkan Hubungi Administrator")}),d.always(function(){})}})},addOptionElement:function(a,b){var c="";console.log(a);for(var d=0;d<a.length;d++)c+=b==a[d].id?"<option value="+a[d].id+" selected>"+a[d].name+"</option>":"<option value="+a[d].id+">"+a[d].name+"</option>";return c+=b&&0==b?"<option value='0' selected>Selamanya</option>":"<option value='0' >Selamanya</option>"},memoRandumEvent:function(){var b=a("#dataTables-memorandum").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"name"},{data:"period"},{data:"actions"}],columnDefs:[{targets:[1,2],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"asc"]]});b.on("draw.dt",function(){a(".delete-memorandum").on("click",function(){var c=a(this).attr("memorandum-id");App.confirm("Anda yakin ingin menghapus Surat Peringatan? ",function(c){var d={memorandum_id:c},e="delete_memorandum",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){b.api().ajax.reload()}),f.fail(function(a,b){App.alert("Maaf, Surat Peringatan Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)}),a(".edit-memorandum").on("click",function(){var b=a(this).attr("memorandum-id");a("#save-memorandum").attr("data-action","edit");var c=a.ajax({type:"POST",url:"get_one_memorandum",data:{memorandum_id:b}});c.done(function(b){var c=JSON.parse(b);c.status&&(a("#memorandum-name").val(c.data.name),a("#memorandum-id").val(c.data.id),a("#memorandum-period").val(c.data.period),a(".modal-title").html("Ubah Surat Peringatan"),a("#save-memorandum").attr("data-action","edit"),a("#memorandum-modal").modal("show"))}),c.fail(function(a,b){App.alert("Maaf, Gagal Mengambil data Surat Peringatan. Silahkan Hubungi Administrator")}),c.always(function(){})})}),a("#save-memorandum").on("click",function(){var c,d={memorandum_name:a("#memorandum-name").val(),memorandum_period:a("#memorandum-period").val()},e="save_memorandum",f="",g="";if("edit"==a(this).attr("data-action")&&(d={memorandum_name:a("#memorandum-name").val(),memorandum_period:a("#memorandum-period").val(),memorandum_id:a("#memorandum-id").val()},console.log(d),e="update_memorandum"),f=a("#memorandum-name"),c=a("#memorandum-period"),0===f.val().length?(f.parent().addClass("has-error"),g+="Nama Surat Peringatan Tidak Boleh Kosong <br>"):f.parent().removeClass("has-error"),0===c.val().length?(c.parent().addClass("has-error"),g+="Period Surat Peringatan Tidak Boleh Kosong <br>"):App.isInteger(c.val())?c.parent().removeClass("has-error"):(c.parent().addClass("has-error"),g+="Period Surat Peringatan Harus Diisi  Angka<br>"),0==g.length){var h=a.ajax({type:"POST",url:e,data:d});h.done(function(c){console.log(c);var d=JSON.parse(c);d.status?(a("#memorandum-name").val(""),a("#memorandum-period").val(""),a("#memorandum-name").parent().removeClass("has-error"),a("#memorandum-period").parent().removeClass("has-error"),g="",a(".error-message").html(g),b.api().ajax.reload(),a("#memorandum-modal").modal("hide")):App.alert(d.message)}),h.fail(function(a,b){App.alert("Maaf, Status Kepegawaian Gagal Di simpan. Silahkan Hubungi Administrator")}),h.always(function(){})}a(".error-message").html(g)})},salaryComponentEvent:function(){config={bProcessing:!0,bServerSide:!0,sServerMethod:"POST",responsive:!0,autoWidth:!1,ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"name"},{data:"is_enhancer"},{data:"key"},{data:"formula_default"}],order:[[0,"asc"]]};var b=a("#dataTables-salary-component").dataTable(config);a(window).on({resize:function(c){b.fnClearTable()&&b.fnDestroy()&&(b=a("#dataTables-salary-component").dataTable(config))}}),b.on("draw.dt",function(){a(".delete-salary-component").on("click",function(){var c=a(this).attr("salary-component-id");App.confirm("Anda yakin ingin menghapus Surat Peringatan? ",function(c){var d={salary_component_id:c},e="delete_salary_component",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){b.api().ajax.reload()}),f.fail(function(a,b){App.alert("Maaf, Komponen Gaji Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)})})},officeHourseEvent:function(){var b=a("#dataTables-office-hours").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"name"},{data:"checkin_time"},{data:"checkout_time"},{data:"actions"}],columnDefs:[{targets:3,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"asc"]]});b.on("draw.dt",function(){a(".delete-office-hours").on("click",function(){var c=a(this).attr("office-hours-id");App.confirm("Anda yakin ingin menghapus Template Jam Kerja? ",function(c){var d={id:c},e="delete_office_hours",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){var c=JSON.parse(a);c.status?b.api().ajax.reload():App.alert(c.message)}),f.fail(function(a,b){App.alert("Maaf, Template Jam Kerja Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)})})},jobsEvent:function(){a("#checkin_time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"HH:mm"}),a("#checkout_time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"HH:mm"});var b=a("#dataTables-jobs-list").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"jobs_name"},{data:"note"},{data:"salary_component"}],columnDefs:[{targets:[2],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"asc"]]});b.on("draw.dt",function(){a(".delete-jobs").on("click",function(){var c=a(this).attr("jobs-id");App.confirm("Anda yakin ingin menghapus Master Jabatan? ",function(c){var d={id:c},e="delete_jobs",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){var c=JSON.parse(a);c.status?b.api().ajax.reload():App.alert(c.message)}),f.fail(function(a,b){App.alert("Maaf, Master Jabatan Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)})})},isString:function(a){return"string"==typeof a||"object"==typeof a&&a.constructor===String},isInteger:function(a){var b=/^\d+$/;return b.test(a)},setSalaryComponentEVent:function(){a("#add_enhancer").on("click",function(a){a.preventDefault(),App.enhancerCount++,App.add_enhancer(App.enhancerCount)}),a(".remove_enhancer").on("click",function(b){function c(){a("#enhancer-"+d[2]).remove()}var d=a(this).attr("id").split("_");App.confirm("Anda yakin ingin menghapus?",c)}),a("#add_subtrahend").on("click",function(a){a.preventDefault(),App.subtrahendCount++,App.add_subtrahend(App.subtrahendCount)}),a(".remove_subtrahend").on("click",function(b){function c(){a("#subtrahend-"+d[2]).remove()}var d=a(this).attr("id").split("_");App.confirm("Anda yakin ingin menghapus?",c)})},add_enhancer:function(b){var c='<tr id="enhancer-'+b+'" class="countIngredient"><td><div class="row"><div class="col-md-5">'+App.createIngredientOption(b,App.dataEnhancerSalaryComponent,"enhancer")+'</div><div class="col-md-3"><input type="text" class="form-control NumericDecimal" field-name = "jumlah" placeholder="Jumlah" name="enhancer['+b+'][quantity]" value="0"/></div><div class="col-md-1"><button id="remove_enhancer_'+b+'" type="button" class="remove_enhancer btn btn-mini btn-danger pull-right"><i class="fa fa-trash-o"></i></button></div></div></td></tr>';a("#enhancer_container").append(c),a(".remove_enhancer").on("click",function(b){function c(){a("#enhancer-"+d[2]).remove()}var d=a(this).attr("id").split("_");App.confirm("Anda yakin ingin menghapus?",c)}),App.validationInput()},createIngredientOption:function(a,b,c){for(var d='<select id="ingredient_id_chained_'+a+'" name="'+c+"["+a+'][component_id]" field-name = "Bahan" class="form-control requiredDropdown ingredient_id_chained" autocomplete="off">',e=0;e<b.length;e++)d+='<option value="'+b[e].id+'">'+b[e].name+"</option>";return d+="</select>"},add_subtrahend:function(b){var c='<tr id="subtrahend-'+b+'" class="countIngredient"><td><div class="row"><div class="col-md-5">'+App.createIngredientOption(b,App.dataSubstrahendSalaryComponent,"subtrahend")+'</div><div class="col-md-3"><input type="text" class="form-control NumericDecimal" field-name = "jumlah" placeholder="Jumlah" name="subtrahend['+b+'][quantity]"  value="0"/></div><div class="col-md-1"><button id="remove_subtrahend_'+b+'" type="button" class="remove_subtrahend btn btn-mini btn-danger pull-right"><i class="fa fa-trash-o"></i></button></div></div></td></tr>';a("#subtrahend_container").append(c),a(".remove_subtrahend").on("click",function(b){function c(){a("#subtrahend-"+d[2]).remove()}var d=a(this).attr("id").split("_");App.confirm("Anda yakin ingin menghapus?",c)}),App.validationInput()},validationInput:function(){a(".qty-input").on("keydown",function(b){window.event?b.keyCode=b.keyCode:b.which&&(b.keyCode=b.which),-1!==a.inArray(b.keyCode,[46,8,9,27,13])||65==b.keyCode&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a(".char-only").keypress(function(a){var b=new RegExp("^[a-zA-Z- ]+$"),c=String.fromCharCode(a.charCode?a.charCode:a.which);return b.test(c)||8==a.keyCode||37==a.keyCode||39==a.keyCode||46==a.keyCode?!0:(a.preventDefault(),!1)}),a(".no-special-char").keypress(function(a){var b=new RegExp("^[a-zA-Z0-9 ]+$"),c=String.fromCharCode(a.charCode?a.charCode:a.which);return b.test(c)||8==a.keyCode||37==a.keyCode||39==a.keyCode||46==a.keyCode?!0:(a.preventDefault(),!1)}),a(".NumericDecimal").keypress(function(a){var b=new RegExp("^[0-9. ]+$"),c=String.fromCharCode(a.charCode?a.charCode:a.which);return b.test(c)||8==a.keyCode||37==a.keyCode||39==a.keyCode||46==a.keyCode?!0:(a.preventDefault(),!1)})},employeeEvent:function(){var b=document.location.toString();b.match("#")&&a(".nav-tabs a[href=#"+b.split("#")[1]+"]").tab("show"),a(".nav-tabs a").on("shown.bs.tab",function(a){history.pushState?history.pushState(null,null,a.target.hash):window.location.hash=a.target.hash});a("#dataTables-staff").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"username"},{data:"name"},{data:"email"},{data:"phone"},{data:"gender"},{data:"detail"}],columnDefs:[{targets:[5],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"asc"]]}),a("#dataTables-finger-template").dataTable({bProcessing:!0,bServerSide:!0,scrollX:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlFingertemplates").val(),iDisplayLength:10,columns:[{data:"finger_id"},{data:"size"}],order:[[0,"desc"]]})},jobsHistoryEvent:function(){a("#start-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD",widgetPositioning:{vertical:"bottom"}}),a("#end-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD"}),a("#start-date").on("dp.change",function(b){a("#end-date").length>0&&(a("#end-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD",minDate:new Date(a("#start-date input").val())}),start_date=new Date(a("#start-date input").val()),start_date.setDate(start_date.getDate()),a("#end-date").data("DateTimePicker").minDate(new Date(start_date.toLocaleDateString())),a("#end-date").data("DateTimePicker").minDate(new Date(start_date.toLocaleDateString())))});var b=a("#dataTables-jobs-history").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlJobs").val(),iDisplayLength:10,columns:[{data:"status_name"},{data:"start_date"},{data:"end_date"},{data:"store_name"},{data:"jobs_name"},{data:"reimburse"},{data:"vacation"},{data:"actions"}],columnDefs:[{targets:7,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[2,"asc"]]});b.on("draw.dt",function(){a(".delete-jobs-history").on("click",function(){var c=a(this).attr("jobs-history-id");App.confirm("Anda yakin ingin menghapus Surat Peringatan? ",function(c){var d={id:c},e=App.baseUrl+"admincms/hrd_staff/delete_jobs_history",f=a.ajax({type:"POST",url:e,data:d});f.done(function(a){b.api().ajax.reload()}),f.fail(function(a,b){App.alert("Maaf, Status History Gagal Di Hapus. Silahkan Hubungi Administrator")}),f.always(function(){})},c)}),a(".edit-jobs-history").on("click",function(){var b=a(this).attr("jobs-history-id");a("#save-jobs-history").attr("data-action","edit");var c=a.ajax({type:"POST",url:App.baseUrl+"admincms/hrd_staff/get_one_jobs_history",data:{id:b}});c.done(function(b){var c=JSON.parse(b);console.log(c),c.status&&(a(".modal-title").html("Ubah status Kepegawaian "),a("#save-jobs-history").attr("data-action","edit"),a("#jobs-history-modal").modal("show"),a("#start-date-value").val(c.data.start_date),a("#store_id").val(c.data.store_id),a("#end-date-value").val(c.data.end_date),a("#reimburse").val(c.data.reimburse),a("#vacation").val(c.data.vacation),a("#jobs-history-id").val(c.data.id))}),c.fail(function(a,b){App.alert("Maaf, Gagal Mengambil data Status History. Silahkan Hubungi Administrator")}),c.always(function(){})})}),a("#save-jobs-history").on("click",function(){var c,d={employee_id:a("#employee_id").val(),emp_affair_id:a("#emp_affair_id").val(),start_date:a("#start-date-value").val(),jobs_id:a("#jobs_id").val(),end_date:a("#end-date-value").val(),store_id:a("#store_id").val(),reimburse:a("#reimburse").val(),vacation:a("#vacation").val()},e=App.baseUrl+"admincms/hrd_staff/save_jobs_history",f="";if("edit"==a(this).attr("data-action")&&(d={emp_affair_id:a("#emp_affair_id").val(),start_date:a("#start-date-value").val(),jobs_id:a("#jobs_id").val(),store_id:a("#store_id").val(),reimburse:a("#reimburse").val(),vacation:a("#vacation").val(),id:a("#jobs-history-id").val()},console.log(d),e=App.baseUrl+"admincms/hrd_staff/update_jobs_history"),c=a("#start-date-value"),0===c.val().length?(c.parent().addClass("has-error"),f+="Tanggal Mulai Tidak Boleh Kosong <br>"):c.parent().removeClass("has-error"),0==f.length){var g=a.ajax({type:"POST",url:e,data:d});g.done(function(c){console.log(c);var d=JSON.parse(c);d.status?(a("#start-date-value").val(""),a("#end-date-value").val(""),a("#reimburse").val(""),a("#vacation").val(""),f="",a(".error-message").html(f),b.api().ajax.reload(),a("#jobs-history-modal").modal("hide")):App.alert(d.message)}),g.fail(function(a,b){App.alert("Maaf, Status Kepegawaian Gagal Di simpan. Silahkan Hubungi Administrator")}),g.always(function(){})}a(".error-message").html(f)}),a("#jobs-history-modal").on("hidden.bs.modal",function(b){a("#start-date-value").val(""),a("#end-date-value").val(""),a("#reimburse").val(""),a("#vacation").val(""),a("#start-date-value").parent().removeClass("has-error"),a("#end-date-value").parent().removeClass("has-error"),a("#reimburse").parent().removeClass("has-error"),a("#vacation").parent().removeClass("has-error"),a("#save-jobs-history").attr("data-action",""),a(".modal-title").html("Tambah Status Kepegawaian"),a(".error-message").html(" ")})},payrollHistoryEvent:function(){a("#period-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"MM-YYYY"}),a("#period-date").on("dp.change",function(b){a("#payroll_history_content").length>0&&(employee_id=a("#employee_id").val(),job_id=a("#jobs_id").val(),job_history_id=a("#job_history_id").val(),periode=a(this).find("input").val(),a.ajax({url:App.baseUrl+"admincms/hrd_payroll/generate_single_slip",type:"POST",dataType:"JSON",data:{periode:periode,employee_id:employee_id,job_id:job_id,job_history_id:job_history_id},success:function(b){a("#payroll_history_content").html(b.content),App.setSalaryComponentEVent()}}))});a("#dataTables-payroll-history").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlPayroll").val(),iDisplayLength:10,columns:[{data:"name"},{data:"store_name"},{data:"jobs_name"},{data:"period"},{data:"payroll_total"},{data:"view"},{data:"actions"}],columnDefs:[{targets:[3,4,5,6],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"asc"]]}),a("#dataTables-payroll-slip").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlSlip").val(),iDisplayLength:10,columns:[{data:"name"},{data:"store_name"},{data:"jobs_name"},{data:"period"},{data:"payroll_total"},{data:"view"}],columnDefs:[{targets:[3,4,5],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"asc"]]});a("#generate-jobs,#generate-status").on("change",function(){periode=a("#period-date input").val(),job_id=a("#generate-jobs").val(),status_id=a("#generate-status").val();a(this).attr("id");a.ajax({url:App.baseUrl+"admincms/hrd_payroll/get_employees_for_payroll",type:"POST",dataType:"JSON",data:{periode:periode,job_id:job_id,status_id:status_id},success:function(b){a("#employee_list").html(b.content)}})}),a("#save-generate-slip").on("click",function(){url=App.baseUrl+"admincms/hrd_payroll/generate_slip",a("#form_payroll").attr("action",url),a("#form_payroll").submit()}),a("#save-preview-slip").on("click",function(){url=App.baseUrl+"admincms/hrd_payroll/preview_slip",a("#form_payroll").attr("action",url),a("#form_payroll").submit()}),a("#save-print-slip").on("click",function(){url=App.baseUrl+"admincms/hrd_payroll/print_slip",a("#form_payroll").attr("action",url),a("#form_payroll").submit()}),a("#save-download-slip").on("click",function(){url=App.baseUrl+"admincms/hrd_payroll/download_slip",a("#form_payroll").attr("action",url),a("#form_payroll").submit()})},scheduleStaffList:function(){a("#dataTables-schedule-staff").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"nip"},{data:"name"},{data:"history_holiday"},{data:"set_change_schedule"}],columnDefs:[{targets:[2,3],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]})},holidaysHistory:function(){var b=a("#dataTables-holidays-history").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"nip"},{data:"name"},{data:"start_date"},{data:"end_date"},{data:"days"},{data:"actions"}],columnDefs:[{targets:5,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"desc"]]});a("#trigger_filter_hrd_holidays").on("click",function(){a('input[name="start_date"]:text').val(),a('input[name="end_date"]:text').val();column=2,b.columns(column).search(date).draw()})},scheduleStandardEvent:function(){1==App.standardSchedRepeatStat?(a("#container-end-date").hide(),a("#container-end-date").find(".no-special-char").removeClass("requiredTextField")):a("#container-end-date").show(),a("#start-time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"HH:mm:ss"}),a("#end-time").datetimepicker({sideBySide:!0,useCurrent:!0,format:"HH:mm:ss"}),a("#office_hour").on("change",function(){var b=a.ajax({type:"POST",url:App.baseUrl+"admincms/hrd_schedule/get_data_office_hours",data:{template_id:a(this).val()}});b.done(function(b){var c=JSON.parse(b);1==c.status?(b=c.data,checkin_time=b.checkin_time,checkout_time=b.checkout_time,a("#checkin_time").val(checkin_time),a("#checkout_time").val(checkout_time)):App.alert(c.data)})}),a("#validate_standard_schedule").on("click",function(b){var c=a(".result");c.html("");var d=a("#start-time").val(),e=a("#end-time").val(),f=a("#office_hour").val();return a(".requiredDropdown,.requiredDropDown").each(function(){"0"==a(this).val()||""==a(this).val()||void 0==a(this).val()}),("0"==f||""==f)&&(""==d&&c.empty().html('<div class="alert alert-danger" role="alert">Bagian '+a("#start-time").attr("field-name")+" dibutuhkan</div>"),""==e&&c.empty().html('<div class="alert alert-danger" role="alert">Bagian '+a("#end-time").attr("field-name")+" dibutuhkan</div>")),a(".requiredTextField").each(function(){""==a(this).val()&&(c.empty().html('<div class="alert alert-danger" role="alert">Bagian '+a(this).attr("field-name")+" dibutuhkan</div>"),b.preventDefault())}),a("html, body").animate({scrollTop:0},"fast"),!1}),a("input[type=radio][name=repeat]").change(function(){0==this.value?(a("#container-end-date").show(),a("#container-end-date").find(".no-special-char").addClass("requiredTextField")):1==this.value&&(a("#container-end-date").hide(),a("#container-end-date").find(".no-special-char").removeClass("requiredTextField"))}),a("#template_id").change(function(){if(0!=a(this).val()){var b=App.baseUrl+"admincms/hrd_schedule/get_data_office_hours",c=a.ajax({type:"POST",url:b,data:{template_id:a(this).val()}});c.done(function(b){var c=JSON.parse(b);c.status&&(a("#start-time-value").val(c.data.checkin_time),a("#end-time-value").val(c.data.checkout_time))}),c.fail(function(a,b){App.alert("Maaf,Ada Kesalahan Server. Silahkan Hubungi Administrator")}),c.always(function(){})}})},setComplimentUserEvent:function(){a(".y_compliment").is(":checked")||a("#container-pin").hide(),a("input[type=radio][name=is_compliment]").change(function(){0==this.value?a("#container-pin").hide():1==this.value&&a("#container-pin").show()})},reimburseEvent:function(){config={bProcessing:!0,bServerSide:!0,sServerMethod:"POST",responsive:!0,autoWidth:!1,ajax:a("#dataProcessUrl").val(),iDisplayLength:10,columns:[{data:"store_name"},{data:"name"},{data:"jobs_name"},{data:"created_at"},{data:"total"},{data:"note"},{data:"actions"}],columnDefs:[{targets:6,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]};var b=a("#dataTables-reimburse").dataTable(config);a(window).on({resize:function(c){b.fnClearTable()&&b.fnDestroy()&&(b=a("#dataTables-reimburse").dataTable(config))}});var c=a(".typeahead");c.typeahead({source:[{id:"someId1",name:"Display name 1"},{id:"someId2",name:"Display name 2"}],autoSelect:!0}),c.change(function(){var a=c.typeahead("getActive");a&&a.name==c.val()})},attendanceEvent:function(){var b=a("#dataTables-attendance").DataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",iDisplayLength:25,columns:[{data:"name"},{data:"curdate"},{data:"schedule_time"},{data:"over_checkin_time"},{data:"over_checkout_time"},{data:"checkin_time"},{data:"checkout_time"},{data:"enum_status_attendance"},{data:"attachment"},{data:"performance"}],ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:function(b){b.office_hour_id=a("#office_hour_id").val()}},columnDefs:[{targets:[9,1],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]});a("#search_attendance").on("click",function(){var c=a("#attendance_date").val();column=1,b.columns(column).search(c).draw()});a("#dataTables-attendance-history").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlAttendance").val(),iDisplayLength:10,columns:[{data:"name"},{data:"curdate"},{data:"schedule_time"},{data:"checkin_time"},{data:"checkout_time"},{data:"enum_status_attendance"},{data:"attachment"}],columnDefs:[{targets:[1,5,6],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]})},shiftEvent:function(){a("#table-shift").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"name"},{data:"start_date"},{data:"end_date"},{data:"start_time"},{data:"end_time"},{data:"ofname"}],order:[[0,"desc"]]});a("input[type=radio][name=repeat_exchange]").change(function(){0==this.value?a("#end_date_view").show():1==this.value&&a("#end_date_view").hide()}),a("#tukar_shift").on("click",function(){var b=!0;return a("#user_1").val()==a("#user_2").val()&&(App.alert("Tidak Bisa memilih pegawai yang sama !"),b=!1),""==a("#user_1").val()&&(App.alert("Pegawai Tidak Di Pilih"),b=!1),""==a("#user_2").val()&&(App.alert("Pegawai Tidak Di Pilih"),b=!1),b?!0:!1})},moveshiftEvent:function(){a("#table-move-shift").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,
ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"name"},{data:"start_date"},{data:"end_date"},{data:"start_time"},{data:"end_time"},{data:"ofname"}],order:[[1,"desc"]]});a("input[type=radio][name=repeat_exchange]").change(function(){0==this.value?a("#end_date_view2").show():1==this.value&&a("#end_date_view2").hide()}),a("#from_office_hour_1").on("change",function(b){var c=a(this).val();return a.ajax({url:App.baseUrl+"admincms/hrd_shift/get_data_employee_by_office_hour_1",dataType:"JSON",type:"POST",data:{office_hour_id:c},success:function(b){a("#multiselect_from_1").html(b.content)}}),!1}),a("#to_office_hour_1").on("change",function(b){var c=a(this).val();return a.ajax({url:App.baseUrl+"admincms/hrd_shift/get_data_employee_by_office_hour_1",dataType:"JSON",type:"POST",data:{office_hour_id:c},success:function(b){a("#multiselect_to_1").html(b.content)}}),!1}),a("#move_shift").on("click",function(){var b=!0;return""==a("#from_office_hour_1").val()&&(App.alert("Asal Jam Kerja Tidak Di Pilih !"),b=!1),""==a("#to_office_hour_1").val()&&(App.alert("Tujuan Jam Kerja Tidak Di Pilih !"),b=!1),a("#from_office_hour_1").val()==a("#to_office_hour_1").val()&&(App.alert("Tidak Bisa Memilih Jam Kerja Yang Sama !"),b=!1),b?!0:!1})},kelolajadwal:function(){a("#table-kelola-jadwal").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"nm"},{data:"sd"},{data:"ed"},{data:"st"},{data:"et"}],order:[[0,"desc"]]})},employeesHoliday:function(){a("#table-holidays").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"name"},{data:"day"},{data:"created_at"}],order:[[0,"desc"]]})},fingerprint:function(){a("#table-fingerprint").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"name"},{data:"curdate"},{data:"time"}],columnDefs:[{targets:2,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]});a("#filter_submit").on("click",function(b){b.preventDefault();a("#table-fingerprint").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",bDestroy:!0,autoWidth:!1,iDisplayLength:10,ajax:{url:a("#dataProcessUrl").val(),type:"POST",data:{param:a("#formFilter").serialize()}},columns:[{data:"name"},{data:"curdate"},{data:"time"}],columnDefs:[{targets:2,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]})}),a("#download_fingerprint").on("click",function(){App.overlayUI.show();var b={start_date:a("#input_start_date").val(),end_date:a("#input_end_date").val()},c=App.baseUrl+"index.php/hrd_scheduler/save_all_fingerprint",d=a.ajax({type:"POST",url:c,data:b});return d.done(function(a){App.alert("Download Data Fingerprint Berhasil!",function(){App.overlayUI.hide()})}),d.fail(function(a,b){App.alert("Gagal Mendownload Data Fingerprint!",function(){App.overlayUI.hide()})}),d.always(function(){}),!1})},downloadLogData:function(b){App.overlayUI.show();var c=a.ajax({type:"POST",url:App.baseUrl+"index.php/hrd_scheduler/"+b});c.done(function(a){App.alert("Download Data Fingerprint Berhasil!",function(){App.overlayUI.hide()})}),c.fail(function(a,b){App.alert("Gagal Mendownload Data Fingerprint!",function(){App.overlayUI.hide()})}),c.always(function(){})},performanceEvent:function(){a("#start-date-statistic").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD"}),a("#start-date-statistic").on("dp.change",function(b){a("#end-date-statistic").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD"}),a("#end-date-statistic").data("DateTimePicker").minDate(b.date),a("#end-date-statistic").on("dp.change",function(a){alert("RELOAD TABLE")})});a("#dataTables-perfomance-statistic").dataTable({bProcessing:!0,bServerSide:!0,autoWidth:!1,sServerMethod:"POST",ajax:a("#dataProcessUrlAttendanceSta").val(),iDisplayLength:10,columns:[{data:"name"},{data:"total_days"}],columnDefs:[{targets:0,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[1,"desc"]]});App.initGraphAttendance()},initGraphAttendance:function(){if(!(a("#graph-attendance").length<=0)){var b={user_id:a("#user_id").val()},c=App.baseUrl+"admincms/hrd_attendance/get_data_graphic_attendance",d=a.ajax({type:"POST",url:c,data:b});d.done(function(b){var c=JSON.parse(b);a("#graph-attendance").highcharts({chart:{type:"column"},credits:{enabled:!1},title:{text:"Statistik Absensi"},xAxis:{type:"category",labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}},categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{title:{text:"Jumlah"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:100,y:70,floating:!0,shadow:!0},series:c})}),d.fail(function(a,b){App.alert("Data Kosong")}),d.always(function(){})}},loanEvent:function(){var b=(a("#dataTables-loan").dataTable({bProcessing:!0,bServerSide:!0,autoWidth:!1,sServerMethod:"POST",ajax:a("#dataProcessUrlLoan").val(),iDisplayLength:10,columns:[{data:"store_name"},{data:"name"},{data:"jobs_name"},{data:"loan_date"},{data:"loan_total"},{data:"instalment"},{data:"repayment_total"},{data:"outstanding_total"},{data:"view"},{data:"actions"}],columnDefs:[{targets:[0,6,7,8,9],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]}),a("#dataTables-repayments").dataTable({bProcessing:!0,bServerSide:!0,scrollX:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlRepayments").val(),iDisplayLength:10,columns:[{data:"repayment_date"},{data:"repayment_total"},{data:"repayment_method"},{data:"actions"}],columnDefs:[{targets:3,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]}));a("#repayment-date").datetimepicker({sideBySide:!0,useCurrent:!0,format:"YYYY-MM-DD"}),a("#save-repayment").on("click",function(){var c={repayment_total:a("#repayment_total").val(),repayment_date:a("#repayment_date").val(),loan_id:a("#loan_id").val()},d=App.baseUrl+"admincms/hrd_loan/save_repayment",e=a.ajax({type:"POST",url:d,data:c});e.done(function(c){console.log(c);var d=JSON.parse(c);d.status?(b.api().ajax.reload(),a("#repayment-modal").modal("hide")):App.alert(d.message)}),e.fail(function(a,b){App.alert("Maaf, Data Pembayaran Gagal Di simpan. Silahkan Hubungi Administrator")}),e.always(function(){})}),a("#payment_option").change(function(){var b=a(this).val();0==b?a("#instalment").removeAttr("disabled"):1==b?(a("#instalment").val(1),a("#instalment").attr("disabled","disabled")):2==b?a("#instalment").removeAttr("disabled"):3==b&&(a("#instalment").attr("disabled","disabled"),a("#instalment").val(1))}),a("#loan_user_id").change(function(){if(0!=a(this).val()){a("#take_home_pay").css({display:"block"});var b=App.baseUrl+"admincms/hrd_loan/get_last_payroll",c=a.ajax({type:"POST",url:b,data:{user_id:a(this).val()}});c.done(function(b){var c=JSON.parse(b);if(c.status){a("#take_home_pay_value").html("Rp. 0"),c.data.total_take_home_pay||(c.data.total_take_home_pay=0),a("#total_take_home").val(c.data.total_take_home_pay);var d=parseInt(c.data.total_take_home_pay),e=App.moneyFormat(d,"Rp.");d&&a("#take_home_pay_value").html(e)}}),c.fail(function(a,b){App.alert("Maaf, Ambil data gagal. Silahkan Hubungi Administrator")}),c.always(function(){})}else a("#take_home_pay").css({display:"block"})})},overtimeEvent:function(){a("#dataTables-overtime").dataTable({bProcessing:!0,bServerSide:!0,autoWidth:!1,sServerMethod:"POST",ajax:a("#dataProcessUrlovertime").val(),iDisplayLength:5,columns:[{data:"uname"},{data:"created_at"},{data:"start_time"},{data:"end_time"},{data:"note"},{data:"actions"}],columnDefs:[{targets:[2,3,5],orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[2,"desc"]]})},moneyFormat:function(a,b){return b+" "+a.toFixed(0).replace(/./g,function(a,b,c){return b>0&&","!==a&&(c.length-b)%3===0?"."+a:a})},templateAuditEvent:function(){var b=(a("#dataTables-template-list").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlTemplate").val(),iDisplayLength:10,columns:[{data:"name"},{data:"description"},{data:"actions"}],columnDefs:[{targets:2,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]}),1);b=a("#child-list").children().length,a("#add_audit_category").on("click",function(){App.createHtmlAuditCategory(parseInt(b)),b++}),App.addDetailCategoryEvent()},createHtmlAuditCategory:function(b){var c='<div class="col-lg-6 col-sm-offset-3" id="category-'+b+'"><div class="panel panel-default"><div class="panel-heading"> <a class="btn remove_category" id="'+b+'"   >X</a></div><div class="panel-body"><div class="col-lg-12" > <div class="form-group"><label for="floor_name" class="col-sm-4 control-label">Nama Kategori</label> <div class="col-sm-8"><input type="text" name="category[]" class="form-control no-special-char"></div> </div>   <div class="col-lg-12" id="detail-container-'+b+'"><div class="panel panel-default" id="category-detail-0"><div class="panel-body"><div class="col-lg-12"><div class="form-group"> <label for="floor_name" class="col-sm-2 control-label">Nama</label> <div class="col-sm-10"><input type="text" name="detail_category['+b+'][0][name]" class="form-control no-special-char"></div></div>     </div><div class="col-lg-12"> <div class="form-group"><label for="floor_name" class="col-sm-2 control-label">Point</label>   <div class="col-sm-10">      <input type="text" name="detail_category['+b+'][0][point]" class="form-control qty-input">  </div>  </div>      </div> </div>    </div></div>  </div><div class="col-lg-12"><div class="form-group">  <div class="col-sm-4 col-sm-offset-5"><a   category-id="'+b+'"    class="btn btn-default add_audit_detail_category">Tambah</a></div></div>    </div>    </div>    </div>    </div>    ';a("#category_list").append(c),a(".add_audit_detail_category").unbind("click"),App.addCategoryEvent(),App.addDetailCategoryEvent(),App.validationInput()},createHtmlAuditDetailCategory:function(b,c){console.log(b);var d='<div class="panel panel-default" id="category-detail-'+b+'"><div class="panel-heading"> <a class="btn remove_detail_category" id="'+b+'"  category-id = '+c+' >X</a></div><div class="panel-body"><div class="col-lg-12"><div class="form-group"> <label for="floor_name" class="col-sm-2 control-label">Nama</label> <div class="col-sm-10"><input type="text" name="detail_category['+c+"]["+b+'][name]" class="form-control no-special-char"></div>  </div>    </div> <div class="col-lg-12"> <div class="form-group"> <label for="floor_name" class="col-sm-2 control-label">Point</label>  <div class="col-sm-10">    <input type="text" name="detail_category['+c+"]["+b+'][point]" class="form-control qty-input">  </div></div>     </div>   </div>    </div>   ';a(".add_audit_detail_category").unbind("click"),a("#detail-container-"+c).append(d),App.addDetailCategoryEvent(),App.validationInput()},addCategoryEvent:function(){a(".remove_category").on("click",function(){var b=a(this).attr("id");a("#category_list").find("#category-"+b).remove(),console.log(a("#category_list").find("#category-"+b))})},addDetailCategoryEvent:function(){a(".add_audit_detail_category").on("click",function(){var b=a(this).attr("category-id"),c=1;c=a("#detail-container-"+b).children().length,App.createHtmlAuditDetailCategory(c,b)}),a(".remove_detail_category").on("click",function(){var b=a(this).attr("category-id"),c=a(this).attr("id");a("#category-"+b).find("#category-detail-"+c).remove()})},processAuditEvent:function(){a("#dataTables-process-list").dataTable({bProcessing:!0,bServerSide:!0,sServerMethod:"POST",ajax:a("#dataProcessUrlProcessAudit").val(),iDisplayLength:10,columns:[{data:"store_name"},{data:"period"},{data:"created_at"},{data:"template_name"},{data:"description"},{data:"actions"}],columnDefs:[{targets:5,orderable:!1,bSearchable:!1,"class":"center-tr"}],order:[[0,"desc"]]});a("#template_audit").change(function(){var b=App.baseUrl+"admincms/hrd_audit/download_template",c=a(this).val();if(0==c)a("#category_list").empty();else{var d=a.ajax({type:"POST",url:b,data:{template_id:c}});d.done(function(b){a("#category_list").html(b),a("#max_grade_audit").html(a("#max_grade").val()),App.sliderEvent()}),d.fail(function(a,b){App.alert("Maaf, Status Kepegawaian Gagal Di Hapus. Silahkan Hubungi Administrator")}),d.always(function(){})}})},sliderEvent:function(){function b(){var b=0,c=parseInt(a("#max_grade_audit").html());a(".point").each(function(){b+=parseInt(a(this).val())});var d=parseInt(b)/c*100;a("#total_grade_audit").html(b),a("#total_precentage_audit").html(d.toFixed(2)+" %")}a(".slider-range-min").each(function(c){a(this).slider({range:"min",value:0,min:a(this).attr("min"),max:a(this).attr("max"),slide:function(b,c){a("#"+a(this).attr("child")).val(c.value)},stop:function(a,c){b()}}),a("#"+a(this).attr("child")).val(a("#slide-"+a(this).attr("child")).slider("value"))})},rollingShift:function(){a("input[type=radio][name=repeat-rolling]").change(function(){0==this.value?(a("#conta-end-date").show(),a("#conta-end-date").find(".no-special-char").addClass("requiredTextField")):1==this.value&&(a("#conta-end-date").hide(),a("#conta-end-date").find(".no-special-char").removeClass("requiredTextField"))}),a("#start-date-rolling").datetimepicker({useCurrent:!0,format:"YYYY-MM-DD"}),a("#end-date-rolling").datetimepicker({useCurrent:!0,format:"YYYY-MM-DD"})},setHolidays:function(){var b=a(".result");b.html(""),a("#holiday-date").datetimepicker({useCurrent:!0,format:"YYYY-MM-DD"});a("#holiday-date").val()},exchangeShift:function(){a("input[type=radio][name=repeat-exchange]").change(function(){0==this.value?(a("#container-end-date-exchange").show(),a("#container-end-date-exchange").find(".no-special-char").addClass("requiredTextField")):1==this.value&&(a("#container-end-date-exchange").hide(),a("#container-end-date-exchange").find(".no-special-char").removeClass("requiredTextField"))}),a("#from_office_hour,#to_office_hour").on("change",function(b){var c=a(this).val(),d=this;return a.ajax({url:App.baseUrl+"admincms/hrd_schedule/get_data_employee_by_office_hour",dataType:"JSON",type:"POST",data:{office_hour_id:c},success:function(b){"from_office_hour"==a(d).attr("id")?a("#multiselect_from_1").html(b.content):a("#multiselect_to_1").html(b.content)}}),!1})},settingRollingOfficeHour:function(){a("#from_office_hour_id").on("change",function(b){var c=a(this).val();return a.ajax({url:App.baseUrl+"admincms/hrd/get_data_office_hour_rolling",dataType:"JSON",type:"POST",data:{office_hour_id:c},success:function(b){a("#multiselect_from_1").html(b.content_from),a("#multiselect_to_1").html(b.content_to)}}),!1})}}});